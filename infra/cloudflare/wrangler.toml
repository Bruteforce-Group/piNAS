name = "pinas-deployer"
main = "src/index.ts"
compatibility_date = "2025-11-26"
compatibility_flags = ["nodejs_compat"]
account_id = "0b0ee2b5eaf1fb8a2612e40ab6488052"
workers_dev = true

# Custom domain route
routes = [
  { pattern = "pinas.bozza.au/*", zone_name = "bozza.au" }
]

# Replace the placeholder IDs below with the output of
# `wrangler kv namespace create pinas-clients` and the
# real R2 bucket names before deploying.
[[kv_namespaces]]
binding = "CLIENTS_KV"
id = "035c5c001ac34ad297e57acd8883bfaf"
preview_id = "f7149a3a99a24a9791b902936e7dc81a"

[[r2_buckets]]
binding = "ARTIFACTS_BUCKET"
bucket_name = "pinas-artifacts"
preview_bucket_name = "pinas-artifacts-dev"

[vars]
# Default poll interval (seconds) returned to clients unless overridden per-env
CLIENT_POLL_INTERVAL_SECONDS = "300"
# Optional fallback URL for documentation links returned by the worker
DOCUMENTATION_URL = "https://github.com/Bruteforce-Group/piNAS"

[env.production]
# Override bindings/vars here if production uses different namespaces/buckets
# [[env.production.kv_namespaces]]
# ...
# [[env.production.r2_buckets]]
# ...
[env.production.vars]
CLIENT_POLL_INTERVAL_SECONDS = "180"
